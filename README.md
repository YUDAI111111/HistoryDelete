# History Cleaner (Popup Only)

ワンタップでの手動削除に加え、多彩なトリガーによる自動削除機能を備えた、プライバシー保護に特化したChrome拡張機能です。

## 概要

ブラウザの閲覧履歴を、ユーザーのライフスタイルや作業環境に合わせて最適なタイミングで自動消去します。コンパクトなUIでありながら、期間指定や特定のイベント（起動時、ロック時など）に連動した高度な削除設定が可能です。

## 主な機能

### 1. 柔軟な削除トリガー（自動・手動）
* **ワンタップ削除**: ポップアップ内のボタンをクリックするだけで、設定した期間の履歴を即座に削除します。
* **多彩な自動削除モード**:
    - **インターバル**: 指定した分（最短5分）ごとに定期実行します。
    - **毎日**: 指定した時刻に毎日実行します。
    - **起動時**: ブラウザの起動時に自動でクリーンアップします。
    - **全ウィンドウ終了時**: ブラウザのすべてのウィンドウを閉じたタイミングで実行します。
    - **システムロック時**: PCの画面ロック（idle状態）を検知して実行します。

### 2. インテリジェント・バッジ表示
* **リアルタイム・カウント**: 現在の履歴件数をアイコン上のバッジに表示します。
* **上限表示**: 100件以上の場合は「99+」と表示し、ブラウザの負荷やプライバシー状態を視覚的に把握できます。

### 3. 詳細なカスタマイズ
* **期間選択**: 削除対象を「1時間以内」「24時間以内」「7日間」「30日間」「全期間」から選択可能です。
* **テーマ切り替え**: 利用環境に合わせてライトモードとダークモードを切り替えられます。
* **設定の同期**: `storage.sync` を使用しているため、同じGoogleアカウントでログインしている他のブラウザとも設定が同期されます。

## 技術仕様

* **プラットフォーム**: Chrome Extension Manifest V3
* **使用API**:
    - `browsingData`: 履歴データの安全な削除
    - `history`: バッジ表示用の件数取得
    - `alarms`: 定期/時刻指定の自動削除スケジュール
    - `idle`: 画面ロック状態の検知
    - `storage.sync`: ユーザー設定の保存と同期

## プライバシーとセキュリティ

* **ローカル処理**: 履歴データの削除処理はすべてブラウザ内で完結し、外部サーバーへデータを送信することはありません。
* **最小権限**: 動作に必要な権限（browsingData, history等）のみを要求し、必要以上のデータアクセスを行わない設計となっています。
